# ITLog Device Manager 테스트 체크리스트

## 사전 준비
- [ ] Flask 서버 실행 확인 (`python app.py`)
- [ ] 데이터베이스 파일 존재 확인 (`sensor.db`)
- [ ] `.env` 파일 설정 확인 (EXE_MODE: SERVER/CLIENT)
- [ ] 테스트 센서 데이터 시뮬레이터 준비 (`python Extend/SocketServer_SensorTest.py`)

## 1. 인증 시스템 (`/login`, `/logout`)
### 로그인 페이지
- [ ] 로그인 페이지 접근 가능
- [ ] 올바른 자격증명으로 로그인 성공
- [ ] 잘못된 자격증명으로 로그인 실패 메시지 확인
- [ ] 빈 필드 제출 시 에러 처리
- [ ] 로그인 후 적절한 권한 페이지로 리다이렉트
- [ ] 세션 쿠키 생성 확인

### 로그아웃
- [ ] 로그아웃 버튼 클릭 시 세션 종료
- [ ] 로그아웃 후 보호된 페이지 접근 차단
- [ ] 로그인 페이지로 리다이렉트

### 권한별 접근 제어
- [ ] viewer 권한: 읽기 전용 접근
- [ ] operator 권한: 일부 수정 가능
- [ ] admin 권한: 전체 관리 가능

## 2. 센서 대시보드 (`/sensor/dashboard`)
### 대시보드 표시
- [ ] 페이지 로드 성공
- [ ] 센서 카드 동적 생성
- [ ] 실시간 데이터 수신 (SSE)
- [ ] 각 센서 타입별 데이터 표시 확인 (PM, O2, MQ, NOx, GasM, Wind, Vibro, Crack, Tilt, Sound)
- [ ] 센서 상태 배지 표시 (정상/경고/위험)
- [ ] 데이터 타임스탬프 표시

### 실시간 업데이트
- [ ] SSE 연결 상태 표시
- [ ] 데이터 자동 업데이트 (실시간)
- [ ] 연결 끊김 시 재연결 시도
- [ ] 하트비트 메시지 수신 (30초 간격)

### 필터링 및 검색
- [ ] 센서 타입별 필터
- [ ] 위치별 필터
- [ ] 검색 기능

## 3. 장치 관리 (`/device`)
### 목록 조회
- [ ] 장치 목록 페이지 로드
- [ ] 전체 장치 목록 표시
- [ ] 사용/미사용 상태 표시 (빨간 배경)
- [ ] 페이지네이션 작동

### 장치 추가
- [ ] 새 장치 추가 버튼 클릭
- [ ] 추가 폼 모든 필드 입력
- [ ] 필수 필드 검증
- [ ] 중복 검사 (idx, name)
- [ ] 저장 성공 메시지
- [ ] 목록에 새 장치 표시

### 장치 수정
- [ ] 수정 버튼 클릭 시 폼 로드
- [ ] 기존 데이터 표시
- [ ] 필드 수정 및 저장
- [ ] 수정 성공 메시지
- [ ] 목록에 변경사항 반영

### 장치 삭제
- [ ] 삭제 확인 대화상자
- [ ] 삭제 성공 메시지
- [ ] 목록에서 제거 확인
- [ ] 관련 데이터 정리 확인

## 4. CS 통신 설정 (`/cs`)
### 목록 조회
- [ ] CS 목록 페이지 로드
- [ ] 전체 CS 목록 표시
- [ ] 사용/미사용 상태 표시
- [ ] 장치별 그룹화 표시

### CS 추가
- [ ] 새 CS 추가 폼 표시
- [ ] 통신 타입 선택 (TCP/UDP/Serial)
- [ ] 디바이스 연결 설정
- [ ] 저장 및 검증

### CS 수정/삭제
- [ ] 수정 폼 로드 및 저장
- [ ] 삭제 확인 및 처리
- [ ] 연관 장치 영향 확인

## 5. LED 설정 (`/led`)
### 목록 조회
- [ ] LED 목록 페이지 로드
- [ ] 전체 LED 설정 표시
- [ ] 사용/미사용 상태 표시

### LED 추가/수정
- [ ] LED 타입 선택
- [ ] 포트 설정
- [ ] 표시 시간 설정 (display_sec)
- [ ] 모드 설정
- [ ] 저장 및 검증

### LED 삭제
- [ ] 삭제 확인 및 처리
- [ ] 하드웨어 연결 상태 확인

## 6. 시스템 설정 (`/setting`, `/setting2`)
### Setting1 페이지
- [ ] 설정 목록 로드
- [ ] 각 설정 항목 표시
- [ ] 값 수정 및 저장
- [ ] 설정 타입별 입력 검증

### Setting2 페이지
- [ ] 추가 설정 목록 로드
- [ ] 값 수정 및 저장
- [ ] 시스템 재시작 필요 항목 표시

## 7. 사용자 관리 (`/admin/users`) - Admin Only
### 사용자 목록
- [ ] 전체 사용자 목록 표시
- [ ] 권한 레벨 표시 (admin/operator/viewer)
- [ ] 생성 일시 표시

### 사용자 추가
- [ ] 새 사용자 추가 폼
- [ ] 사용자명 중복 검사
- [ ] 비밀번호 강도 검증
- [ ] 권한 선택
- [ ] 저장 성공 확인

### 사용자 수정
- [ ] 비밀번호 변경
- [ ] 권한 변경
- [ ] 변경 이력 확인

### 사용자 삭제
- [ ] 삭제 확인 대화상자
- [ ] 본인 계정 삭제 방지
- [ ] 마지막 관리자 삭제 방지

## 8. 설정 관리 (`/admin/config`) - Admin Only
### 설정 목록
- [ ] 카테고리별 그룹화
- [ ] 현재 모드(gb)에 맞는 설정만 표시
- [ ] 설정 타입 표시 (string/int/json 등)

### 설정 편집
- [ ] JSON 에디터 로드
- [ ] 문법 하이라이팅
- [ ] JSON 유효성 검증
- [ ] 저장 성공 확인

### 설정 추가/삭제
- [ ] 새 설정 키 추가
- [ ] 기존 설정 삭제
- [ ] 시스템 필수 설정 보호

## 9. 클라이언트 관리 (`/client`)
### 클라이언트 목록
- [ ] 클라이언트 장치 목록 표시
- [ ] 연결 상태 표시
- [ ] IP/포트 정보 표시

### 클라이언트 추가/수정
- [ ] 클라이언트 정보 입력
- [ ] IP 주소 유효성 검사
- [ ] 포트 범위 검증
- [ ] 모니터링 설정

### 폰트 설정 (`/client/font_set`)
- [ ] 폰트 설정 목록 표시
- [ ] 폰트 스타일 미리보기
- [ ] 색상 선택기 작동
- [ ] 복합 키 처리 (fcode+fname)

## 10. 시스템 모니터링 (`/system`)
### 시스템 정보
- [ ] CPU 사용률 실시간 표시
- [ ] 메모리 사용률 표시
- [ ] 디스크 사용량 표시
- [ ] 네트워크 인터페이스 상태
- [ ] 프로세스 목록 표시

### 시스템 제어 (Raspberry Pi)
- [ ] 재부팅 기능
- [ ] 서비스 재시작
- [ ] 로그 파일 조회

## 11. API 엔드포인트
### 공개 API (`/api/public-sensor-stream`)
- [ ] API 키 인증
- [ ] 헤더/쿼리 파라미터 키 검증
- [ ] SSE 스트림 연결
- [ ] 데이터 형식 검증

### 센서 데이터 API
- [ ] `/api/sensor-data/<table>` 접근
- [ ] 시간 범위 필터링
- [ ] 데이터 정렬
- [ ] JSON 응답 형식

### 센서 대시보드 API
- [ ] `/api/sensor-dashboard/cs` CS 데이터 조회
- [ ] `/api/sensor-dashboard/font` 폰트 데이터 조회
- [ ] API 키 인증 확인

### 시스템 상태 API
- [ ] `/api/system-info` 시스템 정보 조회
- [ ] 응답 시간 측정
- [ ] 에러 처리

## 12. 모드별 기능 테스트
### SERVER 모드
- [ ] TCP 소켓 연결 (포트 3000)
- [ ] 실시간 센서 데이터 수신
- [ ] SSE 브로드캐스팅 작동
- [ ] 모든 관리 기능 활성화

### CLIENT 모드
- [ ] TCP 소켓 비활성화 확인
- [ ] SSE API 403 응답 확인
- [ ] 자동 viewer 로그인
- [ ] 센서 대시보드로 자동 리다이렉트
- [ ] 읽기 전용 접근 확인

## 13. 오류 처리 및 복구
### 데이터베이스 오류
- [ ] DB 파일 없을 때 자동 생성
- [ ] 테이블 마이그레이션 자동 실행
- [ ] 트랜잭션 롤백 처리

### 네트워크 오류
- [ ] TCP 연결 끊김 시 재연결 (5초 간격)
- [ ] SSE 연결 끊김 시 재연결
- [ ] API 타임아웃 처리

### 권한 오류
- [ ] 권한 없는 페이지 접근 시 403 에러
- [ ] 로그인 리다이렉트
- [ ] 에러 메시지 표시

## 14. 성능 테스트
### 응답 시간
- [ ] 페이지 로드 시간 < 3초
- [ ] API 응답 시간 < 1초
- [ ] 실시간 데이터 지연 < 500ms

### 부하 테스트
- [ ] 동시 접속자 10명 처리
- [ ] 대량 센서 데이터 처리
- [ ] 메모리 누수 없음

### 캐싱
- [ ] 설정 캐시 5초 동작
- [ ] 강제 새로고침 (?refresh=true)

## 15. UI/UX 테스트
### 반응형 디자인
- [ ] 데스크톱 화면 레이아웃
- [ ] 태블릿 화면 레이아웃
- [ ] 모바일 화면 레이아웃

### 다크모드
- [ ] 다크모드 토글 작동
- [ ] 모든 페이지 스타일 적용
- [ ] 사용자 설정 저장

### 브라우저 호환성
- [ ] Chrome 테스트
- [ ] Firefox 테스트
- [ ] Safari 테스트
- [ ] Edge 테스트

## 테스트 실행 명령어
```bash
# Flask 서버 실행
python app.py

# 센서 데이터 시뮬레이터 실행
python Extend/SocketServer_SensorTest.py

# API 테스트 실행
python test_sensor_dashboard_api.py

# 특정 서버와 API 키로 테스트
python test_sensor_dashboard_api.py http://192.168.1.100:5000 your-api-key
```

## 테스트 완료 체크
- [ ] 모든 필수 기능 테스트 완료
- [ ] 버그 리스트 작성
- [ ] 성능 측정 결과 문서화
- [ ] 개선사항 제안서 작성